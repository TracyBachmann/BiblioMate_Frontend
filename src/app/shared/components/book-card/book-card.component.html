<div class="book-card" [class.is-compact]="compact">
  <div class="book-card__header">
    <h3 class="book-card__title">{{ title }}</h3>
  </div>

  <div class="book-card__image" *ngIf="!compact">
    <ng-container *ngIf="image; else placeholder">
      <img ngSrc="{{ image }}" [alt]="title" width="400" height="300" loading="lazy" />
    </ng-container>
    <ng-template #placeholder>
      <img src="assets/images/placeholder.png" [alt]="title" width="400" height="300" loading="lazy" />
    </ng-template>
  </div>

  <div class="book-card__content">
    <p *ngIf="description?.trim()" class="book-card__description">{{ description }}</p>
    <span *ngIf="showStatus" class="book-card__status">État : {{ status }}</span>

    <a
      class="book-card__link"
      *ngIf="routerLinkCmd as cmd; else disabledLink"
      [routerLink]="cmd"
      [attr.aria-label]="'Voir le détail de ' + title">
      Voir le détail
    </a>

    <ng-template #disabledLink>
      <span class="book-card__link is-disabled" aria-disabled="true" title="Identifiant manquant">Voir le détail</span>
    </ng-template>

      <div *ngIf="reservationDate || expirationDate" class="book-card__reservation">
          <p *ngIf="reservationDate">Date de réservation : {{ reservationDate }}</p>
          <p *ngIf="expirationDate">Expiration : {{ expirationDate }}</p>
      </div>

      <button
              *ngIf="cancellable"
              type="button"
              class="styled-button secondary"
              (click)="onCancelClick()">
          {{ cancelLabel }}
      </button>

      <div *ngIf="loanDate || returnDate" class="book-card__loan">
          <p *ngIf="loanDate">Date d’emprunt : {{ loanDate }}</p>
          <p *ngIf="returnDate">Date de retour : {{ returnDate }}</p>
      </div>

      <button
              *ngIf="extendable"
              type="button"
              class="styled-button secondary"
              (click)="onExtendClick()">
          {{ extendLabel }}
      </button>
      
  </div>
</div>
