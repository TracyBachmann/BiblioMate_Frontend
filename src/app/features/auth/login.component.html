<div class="login-wrapper">
  <div class="login-page">
    <!-- Background image -->
    <img loading="lazy"
      ngSrc="assets/images/hero-background.webp"
      width="1920"
      height="1080"
      alt="Bibliothèque de Montferrand"
      class="login-background"
      fetchpriority="high"
      priority
    />

    <!-- Login form -->
    <form [formGroup]="loginForm" (ngSubmit)="submit()" class="login-form">
      <h1>Se connecter</h1>

      <!-- Link to registration page -->
      <p class="login-subtext">
        Pas de compte ?
        <a routerLink="/inscription">Inscrivez-vous gratuitement</a>
      </p>

      <!-- Email input -->
      <div class="form-field">
        <input
          type="email"
          name="email"
          placeholder="Adresse de messagerie"
          formControlName="email"
          [class.invalid]="hasError('email')"
        />
        <div class="error-text" *ngIf="hasError('email')">
          {{ getErrorMessage('email') }}
        </div>
      </div>

      <!-- Password input -->
      <div class="form-field">
        <input
          type="password"
          name="password"
          placeholder="Mot de passe"
          formControlName="password"
          [class.invalid]="hasError('password')"
        />
        <div class="error-text" *ngIf="hasError('password')">
          {{ getErrorMessage('password') }}
        </div>
      </div>

      <!-- Forgot password link -->
      <a class="forgot-password" routerLink="/mot-de-passe-oublie">Mot de passe oublié ?</a>

      <!-- Remember me checkbox -->
      <div class="checkbox-line">
        <input type="checkbox" id="remember" formControlName="remember" />
        <label for="remember">
          Se souvenir de moi
        </label>
      </div>

      <!-- Action buttons -->
      <div class="button-wrapper">
        <!-- Submit button -->
        <button
          type="submit"
          class="styled-button"
          [disabled]="isSubmitting || loginForm.invalid"
          [class.loading]="isSubmitting"
        >
          <span *ngIf="!isSubmitting">Se connecter</span>
          <span *ngIf="isSubmitting">Connexion en cours...</span>
        </button>

        <!-- Divider between normal login and Google login -->
        <div class="divider"><span>OU</span></div>

        <!-- Google login button (currently disabled) -->
        <button type="button" class="google-button styled-button" disabled>
          <img loading="lazy"
            ngSrc="assets/images/icon-google.svg"
            width="24"
            height="24"
            alt="Google"
            fetchpriority="low"
          />
          Continuer avec Google
        </button>
      </div>

      <!-- Error message displayed when login fails -->
      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
    </form>
  </div>
</div>
