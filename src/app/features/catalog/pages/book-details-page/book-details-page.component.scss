/* =========================================================
   Book details page
   ========================================================= */
.book-details-page {

  .page-gutter { padding-inline: clamp(30px, 7vw, 120px); }

  .content {
    min-height: calc(100vh - 220px);
    display: grid;
    grid-auto-rows: min-content;
    align-content: center;
    row-gap: clamp(28px, 6vh, 72px);
  }

  /* Topbar */
  .topbar {
    display: flex; align-items: center; justify-content: space-between;
    gap: clamp(16px, 3vw, 36px);
    .title-wrap { display: flex; align-items: center; gap: clamp(16px, 2.5vw, 28px); }
    .back-link {
      font: 400 clamp(18px, 1.5vw, 24px)/1.2 "Inria Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color: #0e5aa6; text-decoration: none;
    }
    .back-link:hover { text-decoration: underline; }
  }

  /* Grille */
  .grid {
    display: grid;
    grid-template-columns: auto 1fr;
    column-gap: clamp(28px, 5vw, 80px);
    align-items: start; width: 100%;
  }

  /* Couverture */
  .left .cover { width: clamp(560px, 46vw, 820px); aspect-ratio: 600 / 375; margin: 0; }
  .left .cover img {
    display: block; width: 100%; height: 100%; object-fit: cover;
    border: 2px solid #04446B; border-radius: 12px; background: #f3f6fb;
  }

  /* Textes */
  .props, .description {
    font-family: "Inria Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    font-size: clamp(18px, 1.6vw, 24px); line-height: 1.25;
  }
  .props--top { display: grid; row-gap: 10px; }
  .props--top > div { display: grid; grid-template-columns: max-content 1fr; column-gap: 16px; align-items: baseline; }
  .props--top dt { font-weight: 700; margin: 0; }
  .props--top dd { font-weight: 400; margin: 0; }

  /* Badges d'état */
  .status {
    display: inline-flex; align-items: center; gap: 8px;
    height: 32px; padding: 0 12px; border-radius: 999px;
    font-weight: 600; font-size: 0.9em; border: 1px solid;
  }
  .status::before { content: ""; width: 8px; height: 8px; border-radius: 50%; background: currentColor; }
  .status.is-ok { color: #0b8f5a; background: #e8f7f1; border-color: #b7e3d2; }
  .status.is-ko { color: #b94242; background: #f8eaea; border-color: #f0c8c8; }

  /* Tags */
  .tags { list-style: none; display: flex; flex-wrap: wrap; gap: 8px; margin: 0; padding: 0; }
  .tags li {
    padding: 4px 10px; border-radius: 999px; background: #f2f7fd; border: 1px solid #bcd3ea; color: #0e5aa6;
    font-size: .9em; line-height: 1;
  }

  /* CTA */
  .cta-row { display: flex; gap: 12px; flex-wrap: wrap; align-items: stretch; }
  .cta-right { margin-top: clamp(8px, 1.5vh, 16px); }

  /* Boutons */
  .styled-button {
    display: inline-flex; align-items: center; justify-content: center; gap: .6rem;
    appearance: none; border-radius: 10px; border: 2px solid transparent;
    background: #0e5aa6; color: #fff; cursor: pointer;
    transition: background .2s ease, transform .05s ease, border-color .2s ease;
    font-family: 'Inria Sans', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif; font-weight: 400;

    &:hover { background: #0a4a8a; }
    &:active { transform: translateY(1px); }
    &:disabled { opacity: .6; cursor: not-allowed; }

    &.secondary { background: transparent; color: #0e5aa6; border-color: #0e5aa6; }
    &.secondary:hover { background: rgba(14, 90, 166, .08); }

    &.outline { background: transparent; color: #0e5aa6; border-color: #bcd3ea; }
    &.outline:hover { background: rgba(14, 90, 166, .08); border-color: #0e5aa6; }

    /* lisibilité quand désactivé en contour/secondaire */
    &.secondary:disabled,
    &.outline:disabled { opacity: 1; background: #eef4fc; color: #0e5aa6; border-color: #bcd3ea; }

    .btn-label { display: flex; flex-direction: column; align-items: center; line-height: 1.05; gap: 2px; text-align: center; }
    .btn-label strong { font-weight: 700; }
    .btn-label small  { font-size: .72em; opacity: .9; }
  }

  /* tailles adaptatives */
  .btn-sm { min-width: 160px; height: 44px; font-size: 20px; padding: 0 16px; }
  .btn-lg { min-width: 190px; width: auto; min-height: 50px; height: auto; font-size: 24px; padding: 8px 20px; }

  /* Icônes */
  .styled-button .icon {
    width: 1.35em;
    height: 1.35em;
    display: inline-block;
    background-color: currentColor;
    /* garder le mask-image défini sur .i-... ; on ne le touche pas ici */
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: contain;
    mask-size: contain;
  }

  /* Rappels des sources d’icônes (inchangé) */
  .i-share        { -webkit-mask-image: url("/assets/images/share.svg");        mask-image: url("/assets/images/share.svg"); }
  .i-calendar-add { -webkit-mask-image: url("/assets/images/calendar-add.svg"); mask-image: url("/assets/images/calendar-add.svg"); }
  .i-book-open    { -webkit-mask-image: url("/assets/images/book-open.svg");    mask-image: url("/assets/images/book-open.svg"); }

  /* Dessous */
  .below { display: grid; row-gap: clamp(12px, 2.8vh, 22px); }
  .description h4 { margin: 0 0 6px; font-weight: 700; font-size: clamp(18px, 1.6vw, 24px); }
  .description p { margin: 0; }

  .props--loc {
    display: grid; grid-template-columns: repeat(4, max-content);
    justify-content: space-between; column-gap: clamp(24px, 5vw, 72px); white-space: nowrap;
  }
  .props--loc > div { display: grid; grid-template-columns: max-content 1fr; column-gap: 10px; }
  .props--loc dt { font-weight: 700; margin: 0; }
  .props--loc dd { margin: 0; }

  /* Empty state */
  .empty {
    display: grid; place-items: center; text-align: center; gap: 10px;
    padding: 24px; border: 1px dashed #d6dee8; border-radius: 12px; margin-top: 28px;
  }

  /* Toast (notification) — plus grand */
  .toast-root {
    position: fixed; z-index: 1100;
    right: clamp(12px, 3vw, 24px); bottom: clamp(12px, 3vw, 24px);
    display: grid; gap: 10px;
  }
  .toast {
    display: flex; align-items: center; gap: 14px;
    min-width: 320px; max-width: min(96vw, 520px);
    padding: 16px 18px;
    border-radius: 14px; border: 1px solid #bcd3ea;
    background: #f2f7fd; color: #0e5aa6;
    box-shadow: 0 12px 36px rgba(2,16,32,.16);
    animation: toast-in .22s ease both;

    .t-icon {
      width: 26px; height: 26px; flex: 0 0 26px; background-color: currentColor;
      -webkit-mask: url("/assets/images/book-open.svg") center/contain no-repeat;
      mask: url("/assets/images/book-open.svg") center/contain no-repeat;
    }
    .t-content { line-height: 1.3; font-size: clamp(16px, 1.8vw, 20px); }
    .t-close {
      margin-left: auto; appearance: none; border: 0; background: transparent; color: inherit;
      cursor: pointer; font-size: 22px; line-height: 1; padding: 6px 8px; border-radius: 8px;
    }
    .t-close:hover { background: rgba(0,0,0,.06); }
  }
  .toast.success { background: #e8f7f1; color: #0b8f5a; border-color:#b7e3d2; }
  .toast.error   { background: #f8eaea; color: #b94242; border-color:#f0c8c8; }
  .toast.info    { background: #eef4fc; color: #0e5aa6; border-color:#bcd3ea; }

  @keyframes toast-in { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

  /* Responsive */
  @media (max-width: 1024px) {
    .page-gutter { padding-inline: clamp(20px, 6vw, 60px); }
    .grid { column-gap: clamp(20px, 4vw, 40px); }
    .left .cover { width: clamp(520px, 60vw, 575px); }
  }
  @media (max-width: 700px) {
    .content { min-height: auto; align-content: start; }
    .topbar { align-items: flex-start; gap: 10px; }
    .topbar .title-wrap { flex-direction: column; align-items: flex-start; gap: 8px; }
    .grid { grid-template-columns: 1fr; row-gap: 14px; }
    .left .cover { width: 340px; margin-inline: auto; }
    .cta-right { justify-content: center; }
    .props--loc { grid-template-columns: 1fr; row-gap: 8px; white-space: normal; justify-content: start; }
  }
}

/* Modale de partage (inchangé) */
.book-details-page {
  .share-modal { position: fixed; inset: 0; z-index: 1000; background: rgba(2, 16, 32, .55); display: flex; align-items: center; justify-content: center; padding: clamp(12px, 3vw, 24px); }
  .share-dialog { width: min(680px, 92vw); background: #fff; border: 1px solid #d6dee8; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,.18); padding: 22px 24px; font-family: 'Inria Sans', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif; }
  .dialog-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }
  .dialog-header #share-title { margin: 0; font-weight: 400; font-size: 24px; line-height: 1.25; color: #0f172a; }
  .dialog-header .close-btn { appearance: none; border: 0; background: transparent; cursor: pointer; font-size: 28px; line-height: 1; padding: 6px 8px; color: #374151; border-radius: 10px; }
  .dialog-header .close-btn:hover { background: rgba(0,0,0,.06); }
  .share-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: clamp(12px, 2.5vw, 16px); list-style: none; padding: 0; margin: 0; }
  .share-btn { display: flex; align-items: center; gap: 12px; width: 100%; height: 56px; padding: 0 18px; border-radius: 10px; border: 2px solid transparent; background: #0e5aa6; opacity: 0.6; color: #fff; font-weight: 400; font-size: 16px; text-decoration: none; cursor: pointer; transition: background .2s ease, transform .05s ease, border-color .2s ease; }
  .share-btn:hover { background: #0a4a8a; }
  .share-btn:active { transform: translateY(1px); }
  .share-btn:focus-visible { outline: 0; box-shadow: 0 0 0 3px rgba(14,90,166,.25); }
  .share-btn img { display: block; width: 24px; height: 24px; }
  .share-btn.copy img { filter: brightness(0) invert(1); }
  @media (max-width: 640px) { .share-dialog { width: min(520px, 96vw); } .share-grid { grid-template-columns: 1fr 1fr; } }
}

/* CTA invité */
.book-details-page {
  .cta-guest { margin-top: clamp(8px, 1.5vh, 16px); font-family: "Inria Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; font-size: clamp(18px, 1.6vw, 24px); line-height: 1.25; }
  .cta-guest a { color: #0e5aa6; font-weight: 600; text-decoration: none; display: inline-block; padding: 2px 4px; border-radius: 6px; outline-offset: 2px; transition: background .15s ease, color .15s ease; }
  .cta-guest a:hover { text-decoration: underline; background: rgba(14, 90, 166, .08); }
  .cta-guest a:focus-visible { outline: 2px solid #0e5aa6; }
}

/* Animations */
@keyframes pulse { 0% { transform: scale(.6); opacity:.7; } 70% { transform: scale(1.2); opacity:0; } 100% { transform: scale(1.2); opacity:0; } }




